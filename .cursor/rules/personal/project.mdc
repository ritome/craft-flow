# プロジェクト共通ルール（Laravel12 × MariaDB）

## 目的
本プロジェクトは、複数レジから出力された PDF ファイルを読み込み、
売上データを自動抽出・集計し、Excel ダウンロードを可能にする
業務効率化システムを構築する。

## 技術スタック
- PHP 8.3 / Laravel 12
- MariaDB
- TailwindCSS / Blade
- PDF 読み取り：Laravel Snappy, spatie/pdf-to-text, その他適宜
- Excel 出力：maatwebsite/excel
- フロント補助：Alpine.js または Livewire（必要時）

## コーディング規約（バックエンド）
- Controller は薄く保つ。ビジネスロジックは Service へ分離。
- Repository パターンを採用し、SQL を Controller や Service に直接書かない。
- 例外処理は Service 層で捕捉し、Result オブジェクトで返す。
- DTO でリクエスト変換・バリデーション結果の管理を行う。
- 命名規則：CamelCase（クラス）、snake_case（DBカラム）

## コーディング規約（フロントエンド）
- Blade を基本とし、複雑 UI のみ Livewire を使用。
- 追加 JS を書く場合は Alpine.js を優先。
- モーダルは共通コンポーネントとして切り出す。

## 生成コードの方針
Cursor は以下を優先してコードを生成する：

- PDF → テキスト抽出 → パース → 配列化 → 集計 → Excel 出力まで一連で書く
- テストコードも生成すること
- 不必要なクラスの乱立を避ける
- 「業務として必要な最小限の関数」で構成する

## 非機能要求
- PDF 読み取り処理はキューに載せられる構造を意識する
- 大量データ対応のため、メモリ消費を抑えた実装とする
- 例外時のログ出力を行う（context 情報付与）

## 優先度
1. PDF 複数アップロード機能
2. PDF パース・集計処理
3. Excel 出力ダウンロード
4.（任意）履歴管理
5.（任意）グラフ表示機能
